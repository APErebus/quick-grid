{"version":3,"sources":["webpack:///webpack/bootstrap fbea58803fa1fd51711c","webpack:///./src/app.js","webpack:///external \"angular\"","webpack:///./src/quick-grid-directive.js","webpack:///./src/quick-paging-directive.js","webpack:///./src/quick-grid-footer.html","webpack:///./src/quick-sort-directive.js","webpack:///./src/search-model-factory.js"],"names":["module","directive","factory","restrict","scope","controllerAs","controller","$scope","$element","$attrs","searchModel","$eval","gridModel","require","template","link","controllers","quickGrid","selfController","$compile","sortBy","quickSort","carets","angular","element","toLowerCase","append","on","$apply","paging","sort","PrefixOperator","value","operator","not","undefined","operators","toJSON","values","forEach","x","push","join","Object","keys","key","prototype","PagingModel","defaultSortBy","by","pageIndex","SearchModel","callback","defaultModel","model","pageCount","filters","attachOtherWatchers","attachPagingWatch","Constructor","reset","pagingWatchHandle","filterHash","then","updatePaging","bind","segments","filterCount","name","escape","result","modelWatchHandle","$watch","onChange","filterWatchHandle","newValue","oldValue","apply","length"],"mappings":"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","file":"ng-quick-grid.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fbea58803fa1fd51711c\n **/","import angular from 'angular';\r\nimport quickGrid from './quick-grid-directive.js';\r\nimport quickPaging from './quick-paging-directive';\r\nimport quickSort from './quick-sort-directive';\r\nimport SearchModel from './search-model-factory';\r\n\r\nexport default angular.module('ngQuickGrid', [])\r\n\t.directive('quickGrid', quickGrid)\r\n\t.directive('quickPaging', quickPaging)\r\n\t.directive('quickSort', quickSort)\r\n\t.factory('SearchModel', SearchModel);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.js\n **/","module.exports = angular;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"angular\"\n ** module id = 1\n ** module chunks = 0 1\n **/","function directive() {\r\n    return {\r\n        restrict: 'A',\r\n        scope: true,\r\n        controllerAs: 'grid',\r\n        controller: function($scope, $element, $attrs) {\r\n            this.searchModel = $scope.$eval($attrs.gridModel);\r\n        }\r\n    };\r\n}\r\n\r\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./src/quick-grid-directive.js\n **/","import template from './quick-grid-footer.html';\r\n\r\nfunction directive() {\r\n    return {\r\n        restrict: 'A',\r\n        require: ['^quickGrid', 'quickPaging'],\r\n        controller: function() {},\r\n        scope: true,\r\n        controllerAs: 'quickPaging',\r\n        template,\r\n        link: function($scope, $element, $attrs, controllers) {\r\n            var quickGrid = controllers[0];\r\n            var selfController = controllers[1];\r\n            selfController.searchModel = quickGrid.searchModel;\r\n        }\r\n    };\r\n}\r\n\r\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./src/quick-paging-directive.js\n **/","module.exports = \"<div class=\\\"btn-group\\\" ng-if=\\\"quickPaging.searchModel.pageCount.length > 1\\\">\\r\\n  <button ng-repeat=\\\"x in quickPaging.searchModel.pageCount track by $index\\\" ng-click=\\\"quickPaging.searchModel.paging.toPage($index)\\\" ng-disabled=\\\"$index === quickPaging.searchModel.paging.pageIndex\\\" class=\\\"btn btn-primary btn-sm\\\">{{$index + 1}}</button>\\r\\n</div>\\r\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/quick-grid-footer.html\n ** module id = 4\n ** module chunks = 0 1\n **/","function directive($compile) {\r\n    return {\r\n        restrict: 'A',\r\n        require: '^quickGrid',\r\n        link: function($scope, $element, $attrs, quickGrid) {\r\n            var sortBy = $attrs.quickSort;\r\n            var carets = angular.element('<span ng-if=\"grid.searchModel.paging.sortBy.toLowerCase().indexOf(\\'' + sortBy.toLowerCase() + '\\') === 0\"><i class=\"glyphicon glyphicon-triangle-bottom\" ng-if=\"grid.searchModel.paging.sortBy.toLowerCase().indexOf(\\'desc\\') > -1\"></i><i class=\"glyphicon glyphicon-triangle-top\" ng-if=\"grid.searchModel.paging.sortBy.toLowerCase().indexOf(\\'desc\\') === -1\"></i></span>');\r\n            $element.append($compile(carets)($scope));\r\n            $element.on('click', function() {\r\n                $scope.$apply(function() {\r\n                    quickGrid.searchModel.paging.sort(sortBy);\r\n                });\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nexport default directive;\n\n\n/** WEBPACK FOOTER **\n ** ./src/quick-sort-directive.js\n **/","class PrefixOperator {\r\n    constructor(value, operator) {\r\n        this.value = value;\r\n        this.operator = operator;\r\n    }\r\n\r\n    setNot(not) {\r\n        this.not = not;\r\n    }\r\n\r\n    toggleNot() {\r\n        this.not = !this.not;\r\n    }\r\n\r\n    toJSON() {\r\n        if (this.value === null || this.value === undefined || this.value === '') {\r\n            return undefined;\r\n        }\r\n        var value = this.value;\r\n        return this.operator + value;\r\n    }\r\n}\r\n\r\nvar operators = {\r\n    '%': function(value) {\r\n        this.value = value;\r\n        this.toJSON = function() {\r\n            if (this.value === null || this.value === undefined || this.value === '') {\r\n                return undefined;\r\n            }\r\n            var value = this.value;\r\n            return '%' + value + '%';\r\n        };\r\n    },\r\n    '%~': function(value) {\r\n        this.value = value;\r\n        this.toJSON = function() {\r\n            if (this.value === null || this.value === undefined || this.value === '') {\r\n                return undefined;\r\n            }\r\n            var value = this.value;\r\n            return '%' + value;\r\n        };\r\n    },\r\n    '~%': function(value) {\r\n        this.value = value;\r\n        this.toJSON = function() {\r\n            if (this.value === null || this.value === undefined || this.value === '') {\r\n                return undefined;\r\n            }\r\n            var value = this.value;\r\n            return value + '%';\r\n        };\r\n    },\r\n    '()': function(value) {\r\n        this.value = value;\r\n        this.toJSON = function() {\r\n            if (this.value === null || this.value === undefined || this.value === '') {\r\n                return undefined;\r\n            }\r\n\r\n            var values = [];\r\n            this.value.forEach(function(x) {\r\n                values.push(x);\r\n            });\r\n            return '(' + values.join(',') + ')';\r\n        };\r\n    }\r\n};\r\n\r\nObject.keys(operators)\r\n    .forEach(function(key) {\r\n        operators[key].prototype = PrefixOperator;\r\n    });\r\n\r\nclass PagingModel {\r\n    constructor(defaultSortBy) {\r\n        this.sort(defaultSortBy);\r\n    }\r\n    sort(by) {\r\n        if (by === null || by === undefined) {\r\n            delete this.sortBy;\r\n        } else {\r\n            if (by === this.sortBy) {\r\n                this.sortBy = by + ' desc';\r\n            } else {\r\n                this.sortBy = by;\r\n            }\r\n        }\r\n    }\r\n\r\n    toPage(pageIndex) {\r\n        this.pageIndex = pageIndex;\r\n    }\r\n}\r\n\r\nclass SearchModel {\r\n    constructor(callback, defaultSortBy, defaultModel) {\r\n        this.model = defaultModel || {};\r\n        this.paging = new PagingModel(defaultSortBy);\r\n        this.pageCount = [];\r\n        this.filters = {};\r\n        this.callback = callback;\r\n    }\r\n\r\n    watch(scope) {\r\n        this.scope = scope;\r\n        this.attachOtherWatchers();\r\n        this.attachPagingWatch();\r\n        return this;\r\n    }\r\n    addFilter(key, operator, value) {\r\n        var Constructor = operators[operator] || PrefixOperator;\r\n        this.filters[key] = new Constructor(value, operator);\r\n        return this;\r\n    }\r\n    apply(reset) {\r\n        if (this.pagingWatchHandle) {\r\n            this.pagingWatchHandle();\r\n        }\r\n        if (reset) {\r\n            this.paging.pageIndex = 0;\r\n            this.paging.filterHash = null;\r\n        }\r\n        this.callback(this)\r\n            .then(this.updatePaging.bind(this))\r\n            .then(this.attachPagingWatch.bind(this));\r\n    }\r\n    toQueryString() {\r\n        //note model is not output in the query string, i'd have to build a deep converter and i can't be arsed. just use filters! :P\r\n        var segments = [];\r\n        var filterCount = 0;\r\n        Object.keys(this.filters)\r\n            .forEach((key) => {\r\n                var value = this.filters[key].toJSON();\r\n                if (value !== undefined) {\r\n                    var not = this.filters[key].not ? '!' : '';\r\n                    var name = 'filters[' + filterCount++ + ']';\r\n                    segments.push(name + '.key=' + escape(key));\r\n                    segments.push(name + '.value=' + escape(not + value));\r\n                }\r\n            });\r\n\r\n        if (this.model) {\r\n            Object.keys(this.model)\r\n                .forEach((key) => {\r\n                    var value = this.model[key].toJSON();\r\n                    if (value !== undefined) {\r\n                        segments.push(escape(key) + '=' + escape(value));\r\n                    }\r\n                });\r\n        }\r\n\r\n        segments.push('paging.pageIndex=' + (this.paging.pageIndex || 0));\r\n        segments.push('paging.sortBy=' + escape(this.paging.sortBy || ''));\r\n        segments.push('paging.filterHash=' + escape(this.paging.filterHash || ''));\r\n\r\n        return segments.join('&');\r\n    }\r\n\r\n    toJSON() {\r\n        var result = {\r\n            paging: this.paging,\r\n            filters: this.filters\r\n        };\r\n\r\n        Object.keys(this.model)\r\n            .forEach((key) => {\r\n                result[key] = this.model[key];\r\n            });\r\n\r\n        return result;\r\n    }\r\n\r\n    attachOtherWatchers() {\r\n        this.modelWatchHandle = this.scope.$watch(() => {\r\n            return this.model;\r\n        }, this.onChange.bind(this), true);\r\n\r\n        this.filterWatchHandle = this.scope.$watch(() => {\r\n            return this.filters;\r\n        }, this.onChange.bind(this), true);\r\n    }\r\n\r\n    attachPagingWatch() {\r\n        if (!this.scope) {\r\n            return;\r\n        }\r\n        this.pagingWatchHandle = this.scope.$watch(() => this.paging, (newValue, oldValue) => {\r\n            if (newValue.sortBy !== oldValue.sortBy || newValue.pageIndex !== oldValue.pageIndex) {\r\n                this.apply(false);\r\n            }\r\n        }, true);\r\n    }\r\n\r\n    updatePaging(result) {\r\n        if (result.pageCount !== null) {\r\n            this.pageCount.length = result.pageCount;\r\n        }\r\n\r\n        this.paging.filterHash = result.filterHash;\r\n    }\r\n\r\n    onChange(newValue, oldValue) {\r\n        if (newValue === oldValue) {\r\n            return;\r\n        }\r\n        this.apply(true);\r\n    }\r\n}\r\n\r\nexport default () => SearchModel;\n\n\n/** WEBPACK FOOTER **\n ** ./src/search-model-factory.js\n **/"],"sourceRoot":""}