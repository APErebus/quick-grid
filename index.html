<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Quick-grid by worldspawn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Quick-grid</h1>
      <h2 class="project-tagline">Dotnet helper classes for querying and and angular front end directives</h2>
      <a href="https://github.com/worldspawn/quick-grid" class="btn">View on GitHub</a>
      <a href="https://github.com/worldspawn/quick-grid/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/worldspawn/quick-grid/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="quick-grid" class="anchor" href="#quick-grid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick Grid</h1>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a id="npm" class="anchor" href="#npm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NPM</h3>

<p>To add support to your angular application install the bower package</p>

<pre><code>npm install ng-quick-grid
</code></pre>

<p>You should add the <code>ngQuickGrid</code> module to your application.</p>

<h3>
<a id="nuget" class="anchor" href="#nuget" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nuget</h3>

<p>To add support to your .Net application install the nuget package.</p>

<pre><code>Install-Package QuickGrid
</code></pre>

<h2>
<a id="filters" class="anchor" href="#filters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Filters</h2>

<h3>
<a id="defining-a-filter" class="anchor" href="#defining-a-filter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Defining a filter</h3>

<p>You define a filter on the model, typically in the controller hosting the grid.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">model</span>.<span class="pl-smi">search</span>.<span class="pl-en">addFilter</span>(<span class="pl-s"><span class="pl-pds">'</span>Company.Name<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>);</pre></div>

<p>That will add a filter targeting the Company.Name member expression. The <code>%</code> symbol indicates that this is a contains/like query. So if the value of the filter is <code>Acme</code> a linq expression will be applied as you had typed <code>queryable.Where(x =&gt; x.Company.Name.Contains("Acme"))</code>.</p>

<h3>
<a id="using-a-filter-in-your-html" class="anchor" href="#using-a-filter-in-your-html" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using a filter in your html</h3>

<p>There is nothing fancy about using a filter in your markup. Just have the ng-model target the filter's value field.</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-4<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-group<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">label</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>control-label<span class="pl-pds">"</span></span>&gt;Company Name&lt;/<span class="pl-ent">label</span>&gt;
    &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">maxlength</span>=<span class="pl-s"><span class="pl-pds">"</span>200<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>companyName<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>ctrl.model.search.filters['Company.Name'].value<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-control<span class="pl-pds">"</span></span> <span class="pl-e">autocomplete</span>=<span class="pl-s"><span class="pl-pds">"</span>off<span class="pl-pds">"</span></span> /&gt;
  &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>Remember the grid will react immediately to any change to the filter model. You can control that to some extent by using <code>ng-model-options</code>.</p>

<h3>
<a id="supported-filter-types" class="anchor" href="#supported-filter-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Supported Filter Types</h3>

<table>
<thead>
<tr>
<th>Operator</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>%</td>
<td>Contains</td>
<td>Matches any value that contains the filter value.</td>
</tr>
<tr>
<td>~%</td>
<td>Stars With</td>
<td>Matches any value that starts with the filter value.</td>
</tr>
<tr>
<td>%~</td>
<td>Ends With</td>
<td>Matches any value that ends with the filter value.</td>
</tr>
<tr>
<td>()</td>
<td>Equals One Of</td>
<td>Matches any value that exactly matches one the values in a set. This creates an expression like: <code>query.Where(x =&gt; new [] {"Cat", "Dog"}.Contains(x.AnimalType))</code>. Best used with a multipicker such a <code>select multiple="multiple"</code> element.</td>
</tr>
<tr>
<td>=</td>
<td>Equals</td>
<td>Matches any value that exactly matches the filter value.</td>
</tr>
<tr>
<td>&gt;</td>
<td>Greater Than</td>
<td>Matches any value that is greater than the filter value. Works with dates and numbers.</td>
</tr>
<tr>
<td>&gt;=</td>
<td>Greater Than or Equal</td>
<td>Matches any value that is greater or equal to the filter value. Works with dates and numbers.</td>
</tr>
<tr>
<td>&lt;</td>
<td>Less Than</td>
<td>Matches any value that is less than the filter value. Works with dates and numbers.</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less Than or Equal</td>
<td>Matches any value that is less or equal to the filter value. Works with dates and numbers.</td>
</tr>
</tbody>
</table>

<h4>
<a id="not" class="anchor" href="#not" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Not</h4>

<p>You can return the inverse of the filter by calling <code>setNot(true|false)</code> on the filter. Or <code>toggleNot</code>. Eg: <code>model.search.filters['Company.Name'].setNot(true)</code></p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2>

<p>Adding markup for use in your angular application. Quick grid automatically re queries whenever the model or filters are changed and sets the page index back to zero. The <em>model</em> is an arbitrary object; its members are sent to the server as part of the query request. Filters are structured query parameters that are automatically applied to the query and they are explained in more detail below.</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">form</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>form<span class="pl-pds">"</span></span> <span class="pl-e">novalidate</span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>row<span class="pl-pds">"</span></span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-4<span class="pl-pds">"</span></span>&gt;
      &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-group<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">label</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>control-label<span class="pl-pds">"</span></span>&gt;Order Type&lt;/<span class="pl-ent">label</span>&gt;
        &lt;<span class="pl-ent">select</span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>ctrl.model.search.model.type<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>orderType<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-control<span class="pl-pds">"</span></span>&gt;
          &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>&gt;--&lt;/<span class="pl-ent">option</span>&gt;
          &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>Internal<span class="pl-pds">"</span></span>&gt;Internal&lt;/<span class="pl-ent">option</span>&gt;
          &lt;<span class="pl-ent">option</span> <span class="pl-e">value</span>=<span class="pl-s"><span class="pl-pds">"</span>External<span class="pl-pds">"</span></span>&gt;External&lt;/<span class="pl-ent">option</span>&gt;
        &lt;/<span class="pl-ent">select</span>&gt;
      &lt;/<span class="pl-ent">div</span>&gt;
    &lt;/<span class="pl-ent">div</span>&gt;
    &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-4<span class="pl-pds">"</span></span>&gt;
        &lt;<span class="pl-ent">div</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-group<span class="pl-pds">"</span></span>&gt;
          &lt;<span class="pl-ent">label</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>control-label<span class="pl-pds">"</span></span>&gt;Company Name&lt;/<span class="pl-ent">label</span>&gt;
          &lt;<span class="pl-ent">input</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span> <span class="pl-e">maxlength</span>=<span class="pl-s"><span class="pl-pds">"</span>200<span class="pl-pds">"</span></span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>companyName<span class="pl-pds">"</span></span> <span class="pl-e">ng-model</span>=<span class="pl-s"><span class="pl-pds">"</span>ctrl.model.search.filters['Company.Name'].value<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>form-control<span class="pl-pds">"</span></span> <span class="pl-e">autocomplete</span>=<span class="pl-s"><span class="pl-pds">"</span>off<span class="pl-pds">"</span></span> /&gt;
        &lt;/<span class="pl-ent">div</span>&gt;
      &lt;/<span class="pl-ent">div</span>&gt;
  &lt;/<span class="pl-ent">div</span>&gt;
&lt;/<span class="pl-ent">form</span>&gt;</pre></div>

<p>This is an example table running on quick grid. Quick grid will handle sort clicks and re query the source while maintaining the current page index. The value of <code>quick-sort</code> just needs to be a valid member expression for the target class. Valid members are only those included in the projection and not the source object.</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">table</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>table table-hover<span class="pl-pds">"</span></span> <span class="pl-e">quick-grid</span> <span class="pl-e">data-grid-model</span>=<span class="pl-s"><span class="pl-pds">"</span>ctrl.model.search<span class="pl-pds">"</span></span>&gt;
  &lt;<span class="pl-ent">thead</span>&gt;
    &lt;<span class="pl-ent">tr</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-2<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>Type<span class="pl-pds">"</span></span>&gt;Order Type&lt;/<span class="pl-ent">th</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-2<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>Company.Name<span class="pl-pds">"</span></span>&gt;Company&lt;/<span class="pl-ent">th</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-3<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>Company.Type<span class="pl-pds">"</span></span>&gt;Type&lt;/<span class="pl-ent">th</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-1<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>Amount<span class="pl-pds">"</span></span>&gt;Amount&lt;/<span class="pl-ent">th</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-2<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>EmailAddress<span class="pl-pds">"</span></span>&gt;Email Address&lt;/<span class="pl-ent">th</span>&gt;
      &lt;<span class="pl-ent">th</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>col-lg-2<span class="pl-pds">"</span></span> <span class="pl-e">quick-sort</span>=<span class="pl-s"><span class="pl-pds">"</span>Status<span class="pl-pds">"</span></span>&gt;Status&lt;/<span class="pl-ent">th</span>&gt;
    &lt;/<span class="pl-ent">tr</span>&gt;
  &lt;/<span class="pl-ent">thead</span>&gt;
  &lt;<span class="pl-ent">tbody</span>&gt;
    &lt;<span class="pl-ent">tr</span> <span class="pl-e">ng-repeat</span>=<span class="pl-s"><span class="pl-pds">"</span>order in ctrl.model.results<span class="pl-pds">"</span></span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.type}}&lt;/<span class="pl-ent">td</span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.company.name}}&lt;/<span class="pl-ent">td</span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.company.type)}}&lt;/<span class="pl-ent">td</span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.amount}}&lt;/<span class="pl-ent">td</span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.emailAddress}}&lt;/<span class="pl-ent">td</span>&gt;
      &lt;<span class="pl-ent">td</span>&gt;{{::order.status}}&lt;/<span class="pl-ent">td</span>&gt;
    &lt;/<span class="pl-ent">tr</span>&gt;
  &lt;/<span class="pl-ent">tbody</span>&gt;
  &lt;<span class="pl-ent">tfoot</span>&gt;
    &lt;<span class="pl-ent">tr</span>&gt;
      &lt;<span class="pl-ent">td</span> <span class="pl-e">colspan</span>=<span class="pl-s"><span class="pl-pds">"</span>6<span class="pl-pds">"</span></span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">"</span>text-center<span class="pl-pds">"</span></span> <span class="pl-e">quick-paging</span>&gt;&lt;/<span class="pl-ent">td</span>&gt;
    &lt;/<span class="pl-ent">tr</span>&gt;
  &lt;/<span class="pl-ent">tfoot</span>&gt;
&lt;/<span class="pl-ent">table</span>&gt;</pre></div>

<p>AngularJS example. This is an example controller that demonstrates creating a search model and binding it (<code>watch(scope)</code>) to the search model so it re queries when a change is made. You can instead of using watches, manually refresh the results to page 1 by calling <code>apply(true)</code> to execute the search query and return the paging to page 1 (sorting is not changed) or call <code>apply(false)</code> to execute the search query without changing the paging.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> controller <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>SearchModel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>$scope<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>$http<span class="pl-pds">'</span></span>,
  <span class="pl-k">function</span> (<span class="pl-smi">SearchModel</span>, <span class="pl-smi">$scope</span>, <span class="pl-smi">$http</span>) {
    <span class="pl-k">var</span> model <span class="pl-k">=</span> {
      search<span class="pl-k">:</span> <span class="pl-k">new</span> <span class="pl-en">SearchModel</span>(search, <span class="pl-s"><span class="pl-pds">'</span>Status desc<span class="pl-pds">'</span></span>),
      results<span class="pl-k">:</span> <span class="pl-c1">null</span>        
    };

    <span class="pl-v">this</span>.<span class="pl-smi">model</span> <span class="pl-k">=</span> model;

    <span class="pl-k">function</span> <span class="pl-en">search</span> (<span class="pl-smi">searchModel</span>) {
      <span class="pl-k">return</span> <span class="pl-smi">$http</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/orders?<span class="pl-pds">'</span></span> <span class="pl-k">+</span> <span class="pl-smi">searchModel</span>.<span class="pl-en">toQueryString</span>(),)
        .<span class="pl-en">then</span>(<span class="pl-k">function</span> (<span class="pl-smi">xhr</span>) {
          <span class="pl-smi">model</span>.<span class="pl-smi">results</span> <span class="pl-k">=</span> <span class="pl-smi">xhr</span>.<span class="pl-c1">data</span>.<span class="pl-smi">results</span>;
          <span class="pl-k">return</span> <span class="pl-smi">xhr</span>.<span class="pl-c1">data</span>;
        })
        .<span class="pl-en">catch</span>(<span class="pl-en">console</span>.<span class="pl-smi">error</span>);
    }

    <span class="pl-smi">model</span>.<span class="pl-c1">watch</span>($scope);
  }];</pre></div>

<p>The server side (csharp, webapi). This shows an example QueryOptions implementation. This example does not make use of filters, instead the properties are deserialized from the model sent from the client. How these are used is up the programmer, they have to manually apply them to the query.</p>

<div class="highlight highlight-source-cs"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">OrderListRequest</span> : <span class="pl-k">QueryOptions</span>
{
    <span class="pl-k">public</span> <span class="pl-en">OrderListRequest</span>()
        : <span class="pl-c1">base</span>(20, "Status desc")
    {
    }

    <span class="pl-k">public</span> OrderType? <span class="pl-en">Type</span> { <span class="pl-k">get</span>; <span class="pl-k">set</span>; }    
}</pre></div>

<p>This is an example route that shows how to make use of a request.</p>

<div class="highlight highlight-source-cs"><pre>[Route]
<span class="pl-k">public</span> IHttpActionResult Get([FromUri] OrderListRequest request)
{
    <span class="pl-k">var</span> source = _dbContext.Orders.AsQueryable();

    <span class="pl-k">if</span> (request.Type.HasValue)
    {
        source = source.Where(x =&gt; x.Type == request.Type);
    }

    <span class="pl-k">var</span> query = source        
        .Select(order =&gt; <span class="pl-k">new</span>
        {
            order.Id,
            order.Type,
            Company = <span class="pl-k">new</span>
            {
                order.Company.Name,
                order.Company.Type
            },
            order.Amount
            order.EmailAddress,
            Status = order.Status.Name,
            order.ModifiedUtcDate,            
        });

    <span class="pl-k">var</span> result = request.Apply(query);
    <span class="pl-k">return</span> Ok(result);
}</pre></div>

<p>Values stored on your javascript search model (<code>search.model</code>) are moved up when transformed into json. There is <code>model</code> field in the json.</p>

<p>See you do not have to implement the <code>Company.Name</code> filter except to ensure that it can be resolved in the final select expression of your query.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/worldspawn/quick-grid">Quick-grid</a> is maintained by <a href="https://github.com/worldspawn">worldspawn</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
